<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User media test</title>
</head>
<body>
<script>
    let audiotracks = [];

    function test() {
        navigator.mediaDevices.getDisplayMedia({video: true, audio: true}).then(stream => {
            let tracks = stream.getAudioTracks();
            audiotracks.push(...tracks);
        })
    }

    function test2() {
        navigator.mediaDevices.getUserMedia({audio: true, video: false}).then(stream => {
            let tracks = stream.getAudioTracks();
            audiotracks.push(...tracks);
        })
    }

    setInterval(function () {
        if (audiotracks.length === 2) {
            console.log(start)M;
            var ac = new AudioContext();
            var dest = ac.createMediaStreamDestination()
            dest.connect(audiotracks[0])
            dest.connect(audiotracks[1])
            var mediaRecorder = new MediaRecorder(dest.stream);
            mediaRecorder.start();
        }
    }, 500);

</script>
</body>
<button onclick="test()">Share audio.</button>
<button onclick="test2()">Share mic.</button>
</html>